<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>L/W > Photos</title>
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="css/photos.css">
    <link rel="stylesheet" href="css/header.css">
    <script src="js/visit-monitor.js"></script>
</head>
<body>
    <header w3-include-html="header.html"></header>

    <main>
        <div id="container">
        </div>
    </main>

    <div id="modal" class="photo-modal">
        <div class="photo-container">
            <i id="modal-close" class="fa fa-times"></i>
            <img id="photo-img" src="photos/21041672.jpg">
            <div class="modal-footer">
                <i id="btn-prev" class="fa fa-angle-left modal-icon"></i>
                <p id="image-number" class="modal-status"></p>
                <i id="btn-next" class="fa fa-angle-right modal-icon"></i>
            </div>
        </div>
    </div>
    <script src="js/w3.js"></script>
    <script>
        w3.includeHTML();
    </script>
    <script src="js/jquery-3.4.1.js"></script>
    <script src="js/header.js"></script>
    <script>
        var titles = ['27.08.2017', '15.10.2017', '15.10.2017', '22.10.2017', '22.10.2017', '8.11.2017', '24.12.2017', '29.08.2018', '21.10.2018', '11.11.2018', '28.11.2018', '3.12.2018', '02.01.2019', '08.03.2019', '28.09.2019'];
        var photos = ['21041672.jpg', '22430178.jpg', '22580631.jpg', '22710566.jpg', '22636999.jpg', '23347999.jpg', '25015541.jpg', '39301472.jpg', '43201094.jpg', '5.jpg', '4.jpg', '3.jpg', '2.jpg', '1.jpg', '69941812.jpg'];
        var count = photos.length
        var currentIndex = 0

        function updateModalContent() {
            if (currentIndex <= 0) {
                currentIndex = 0
                document.getElementById('btn-prev').classList.add('disabled-btn')
            } else {
                document.getElementById('btn-prev').classList.remove('disabled-btn')
            }

            if (currentIndex >= count - 1) {
                currentIndex = count - 1
                document.getElementById('btn-next').classList.add('disabled-btn')
            } else {
                document.getElementById('btn-next').classList.remove('disabled-btn')
            }

            document.getElementById('modal').style.display = 'block'
            document.getElementById('photo-img').src = 'photos/' + photos[currentIndex]
            document.getElementById('image-number').innerText = `${Number(currentIndex) + 1} of ${count}`
        }

        function photoClick (event) {
            var element = event.currentTarget
            currentIndex = element.id
            console.log(currentIndex)

            updateModalContent()
        }

        function prevPhoto() {
            currentIndex--
            updateModalContent()
        }

        function nextPhoto() {
            currentIndex++
            updateModalContent()
        }

        function modalClose (_) {
            var modal = document.getElementById('modal')
            modal.style.display = 'none'
        }

        function modalKey (event) {
            if (event.keyCode === 27) {
                modalClose()
            }
        }

        var container = document.getElementById('container')

        for (var i = count - 1; i >= 0; i--) {
            var div = document.createElement('div')
            div.id = i
            div.className = 'photo'
            div.innerHTML = `<img src="photos/${photos[i]}" alt="${titles[i]}"><div class="description"><p>${titles[i]}</p></div>`;
            div.addEventListener('click', photoClick, false)
            container.appendChild(div)
        }

        document.getElementById('modal-close').addEventListener('click', modalClose, false)
        document.getElementById('modal-close').addEventListener('keydown', modalKey, false)
        document.getElementById('btn-prev').addEventListener('click', prevPhoto, false)
        document.getElementById('btn-next').addEventListener('click', nextPhoto, false)
    </script>
</body>
</html>